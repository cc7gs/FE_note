(self["webpackChunkFE_note"]=self["webpackChunkFE_note"]||[]).push([[922],{1422:n=>{"use strict";n.exports={}},3859:(n,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>t});const t={}},7246:(n,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var t=r(7294),a=r(6584),i=r(2196);r(3859);const c=n=>(t.useEffect((()=>{null!==n&&void 0!==n&&n.location.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(n.location.hash.slice(1)))}),[]),t.createElement(t.Fragment,null,t.createElement("div",{className:"markdown"},t.createElement("h2",{id:"\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6"},t.createElement(a.AnchorLink,{to:"#\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6"),t.createElement(i.Z,{code:"/**\n * @name readFileSync\n * @description \u540c\u6b65\u8bfb\u53d6\u6587\u4ef6\n */\nfunction readSyncFn() {\n    const readmeLocation = path.join(__dirname, '../README.md');\n    const readme = fs.readFileSync(readmeLocation);\n    console.log('\u540c\u6b65\u8bfb\u53d6', readme);\n    const reameAsync = fs.readFile(readmeLocation, (err, data) => {\n        console.log('\u5f02\u6b65\u8bfb\u53d6\u6570\u636e', data.toString());\n    });\n}",lang:"js"}),t.createElement("h2",{id:"pipe"},t.createElement(a.AnchorLink,{to:"#pipe","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"pipe"),t.createElement(i.Z,{code:"/**\n * @name stream pipe\n */\nfunction streamPipFn() {\n    const rs = fs.createReadStream('../README.md');\n    const ws = fs.createWriteStream('./temp.md');\n    rs.on('readable', () => {\n        console.log('--read able---', rs.read());\n    })\n    rs.on('end', () => {\n        console.log('---read end--');\n    });\n    rs.pipe(ws);\n}",lang:"js"}),t.createElement("h2",{id:"writestream"},t.createElement(a.AnchorLink,{to:"#writestream","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"WriteStream"),t.createElement(i.Z,{code:"/**\n * @name WriteStream\n * @description \u5199\u5165\u4e00\u4e2a0~10\u6570\u5b57,\u53ea\u5360\u7528\u4e00\u4e2a\u5b57\u8282\u5185\u5b58\n */\n\nfunction writeTenNumber() {\n    const sum = 10;\n    let curVal = 0;\n    const ws = fs.createWriteStream(path.resolve(__dirname, './temp.md'), {\n        highWaterMark: 1 // \u63a7\u5236\u5360\u7528\u5185\u5b58\u6570\n    });\n    function write() {\n        let flag = true;\n        while (flag && curVal < sum) {\n            flag = ws.write(curVal + '');\n            curVal++;\n        }\n        if (curVal === sum) {\n            ws.end();\n        }\n    }\n    ws.on('drain', () => {\n        console.log('...write...', curVal);\n        write();\n    })\n    ws.on('close', () => {\n        console.log('***\u5185\u5bb9\u5199\u5165\u5b8c\u6bd5***');\n    })\n    write();\n}",lang:"js"}),t.createElement("h2",{id:"readstream"},t.createElement(a.AnchorLink,{to:"#readstream","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"ReadStream"),t.createElement(i.Z,{code:"/**\n * @name ReadStream\n * @description \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\n */\nfunction readStreamFn() {\n    const rs = new ReadStream(resolve(__dirname, 'copy.txt'), {\n        highWaterMark: 3,\n    });\n\n    const chunkData = [];\n\n    rs.on('open', (fd) => {\n        console.log(fd, 'read');\n    })\n    rs.on('data', (chunk) => {\n        rs.pause();\n        setTimeout(() => {\n            console.log('\u89e6\u53d1\u6682\u505c\u6062\u590d')\n            rs.resume();\n        }, 10);\n        chunkData.push(chunk);\n    })\n\n    rs.on('close', () => {\n        console.log(chunkData.join(), 'read source')\n    })\n}",lang:"js"}),t.createElement("h2",{id:"demo-\u7ec3\u4e60"},t.createElement(a.AnchorLink,{to:"#demo-\u7ec3\u4e60","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"demo \u7ec3\u4e60"),t.createElement("h3",{id:"\u751f\u6210\u76ee\u5f55"},t.createElement(a.AnchorLink,{to:"#\u751f\u6210\u76ee\u5f55","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u751f\u6210\u76ee\u5f55"),t.createElement(i.Z,{code:"// const pfs = require('fs').promises;\n/**\n * @description \u751f\u6210\u76ee\u5f55\n */\nasync function mkdirFn(paths) {\n    const pathArr = paths.split('/');\n    for (let i = 0; i < pathArr.length; i++) {\n        const currentPath = pathArr.slice(0, i + 1).join('/');\n        try {\n            await pfs.access(currentPath)\n        } catch (error) {\n            await pfs.mkdir(currentPath)\n        }\n    }\n}\n// mkdirFn('a/b/c/d');",lang:"js"}),t.createElement("h3",{id:"\u5220\u9664\u6587\u4ef6\u76ee\u5f55"},t.createElement(a.AnchorLink,{to:"#\u5220\u9664\u6587\u4ef6\u76ee\u5f55","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u5220\u9664\u6587\u4ef6\u76ee\u5f55"),t.createElement(i.Z,{code:"/**\n * @description \u5220\u9664\u6587\u4ef6\u76ee\u5f55\n * @example \n * \u5220\u9664\u6587\u4ef6 fs.unlink()\n * \u5220\u9664\u6587\u4ef6\u5939 fs.rmdir()\n * \u8bfb\u53d6\u6587\u4ef6\u5939 fs.readdir()\n * \u83b7\u53d6\u6587\u4ef6\u72b6\u6001 fs.stat()\n */\nfunction rmDirSync(dir) {\n    const statObj = fs.statSync(dir);\n\n    if (statObj.isFile()) {\n        fs.unlinkSync(dir);\n        return\n    }\n\n    fs.readdirSync(dir)\n        .forEach(curPath => {\n            rmDirSync(path.join(dir, curPath))\n        });\n\n    fs.rmdirSync(dir);\n}",lang:"js"}),t.createElement("h4",{id:"\u5f02\u6b65\u5220\u9664\u6587\u4ef6"},t.createElement(a.AnchorLink,{to:"#\u5f02\u6b65\u5220\u9664\u6587\u4ef6","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u5f02\u6b65\u5220\u9664\u6587\u4ef6"),t.createElement(i.Z,{code:"function rmDir(dir, callback) {\n    fs.stat(dir, (err, stat) => {\n        if (err) {\n            callback(err);\n            return\n        }\n        if (stat.isDirectory()) {\n            fs.readdir(dir, (err, files) => {\n                console.log(dir,files,'file')\n                const paths = files.map(file => path.join(dir, file));\n                let idx=0;\n                function next() {\n                    if (idx === paths.length) fs.rmdir(dir, callback);\n                    rmDir(paths[idx++], next);\n                }\n                next();\n            })\n        } else {\n            fs.unlink(dir, callback)\n        }\n    })\n}",lang:"js"}),t.createElement("h4",{id:"\u540c\u6b65\u5220\u9664"},t.createElement(a.AnchorLink,{to:"#\u540c\u6b65\u5220\u9664","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u540c\u6b65\u5220\u9664"),t.createElement(i.Z,{code:"function rmDirAsync(dir,callback){\n    fs.stat(dir,(err,stats)=>{\n        if (err) {\n            callback(err);\n            return\n        }\n        if(stats.isDirectory()){\n            fs.readdir(dir,(err,files)=>{\n                if(err){\n                    callback(err);\n                    return;\n                }\n                const dirs=files.map(file=>path.join(dir,file));\n                console.log(dirs,'dirs');\n                if(!dirs.length){\n                   return fs.rmdir(dir,callback);\n                }\n                let idx=0;\n                function done(){\n                    if(++idx===dirs.length){\n                        return fs.rmdir(dir,callback);\n                    }\n                }\n                for (let index = 0; index < dirs.length; index++) {\n                    const dir = dirs[index];\n                    rmDirAsync(dir,done);                    \n                }\n            })\n\n        }else{\n            fs.unlink(dir,callback);\n        }\n    })\n}\n\nrmDirAsync('a', (err) => {\xa0\n    if (err) {\n        console.log('rm err',err)\n        return;\n    }\n    console.log('\u5220\u9664\u6210\u529f');\n});",lang:"js"}))))}}]);