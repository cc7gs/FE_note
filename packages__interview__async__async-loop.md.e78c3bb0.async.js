(self["webpackChunkFE_note"]=self["webpackChunkFE_note"]||[]).push([[8351],{1422:e=>{"use strict";e.exports={}},3859:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});const l={}},9179:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var l=n(7294),a=n(6584),c=n(2196);n(3859);const r=e=>(l.useEffect((()=>{null!==e&&void 0!==e&&e.location.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("p",null,"[toc]"),l.createElement("h1",{id:"\u4ec0\u4e48\u662f\u5355\u7ebf\u7a0b\uff0c\u548c\u5f02\u6b65\u7684\u5173\u7cfb"},l.createElement(a.AnchorLink,{to:"#\u4ec0\u4e48\u662f\u5355\u7ebf\u7a0b\uff0c\u548c\u5f02\u6b65\u7684\u5173\u7cfb","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4ec0\u4e48\u662f\u5355\u7ebf\u7a0b\uff0c\u548c\u5f02\u6b65\u7684\u5173\u7cfb"),l.createElement("p",null,"\u901a\u4fd7\u7684\u5c06\u5355\u7ebf\u7a0b\u5c31\u662f\u540c\u4e00\u4e2a\u65f6\u95f4\u5185\u53ea\u505a\u4e00\u4ef6\u4e8b,\u8fd9\u6837\u7684\u597d\u5904\u5c31\u662f",l.createElement("strong",null,"\u907f\u514dDOM\u6e32\u67d3\u51b2\u7a81"),"\u3002 \u800c",l.createElement("strong",null,"\u5f02\u6b65\u5219\u662f\u5bf9\u9875\u9762\u6e32\u67d3\u963b\u585e\u7684\u89e3\u51b3\u65b9\u6848"),",\u8981\u60f3\u5f7b\u5e95\u641e\u61c2\u5f02\u6b65,\u6211\u4eec\u9996\u5148\u8981\u5bf9\u5f02\u6b65\u7684\u6267\u884c\u8fc7\u7a0b\u8fdb\u884c\u4e86\u89e3,\u5373",l.createElement("strong",null,"\u4e8b\u4ef6\u5faa\u73af\u673a\u5236"),l.createElement("img",{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdd88994142347?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"\u539f\u6587\u56fe"})),l.createElement("h1",{id:"\u4ec0\u4e48\u662fevent-loop"},l.createElement(a.AnchorLink,{to:"#\u4ec0\u4e48\u662fevent-loop","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4ec0\u4e48\u662fevent-loop"),l.createElement("p",null,"\u8bf7\u770b\u539f\u6587:",l.createElement(a.Link,{to:"https://juejin.im/post/59e85eebf265da430d571f89"},"https://juejin.im/post/59e85eebf265da430d571f89")),l.createElement("h2",{id:"\u4e8b\u4ef6\u5faa\u73af\u3001\u5b8f\u4efb\u52a1\u3001\u5fae\u4efb\u52a1"},l.createElement(a.AnchorLink,{to:"#\u4e8b\u4ef6\u5faa\u73af\u3001\u5b8f\u4efb\u52a1\u3001\u5fae\u4efb\u52a1","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u4e8b\u4ef6\u5faa\u73af\u3001\u5b8f\u4efb\u52a1\u3001\u5fae\u4efb\u52a1:"),l.createElement("p",null,"\u4e0d\u540c\u7684\u4efb\u52a1\u6e90\u4f1a\u88ab\u5206\u914d\u5230\u4e0d\u540c\u7684 ",l.createElement("strong",null,"Task"),"\u961f\u5217\u4e2d\uff0c\u4efb\u52a1\u6e90\u53ef\u4ee5\u5206\u4e3a",l.createElement("strong",null,"\u5fae\u4efb\u52a1\uff08microtask)",l.createElement("strong",null,"\u548c"),"\u5b8f\u4efb\u52a1\uff08macrotask)"),"\u3002\u5728ES6\u89c4\u8303\u4e2d\uff0cmicrotask \u79f0\u4e3a jobs\uff0cmacrotask \u79f0\u4e3a task."),l.createElement("p",null,l.createElement("strong",null,"\u4e0b\u9762\u914d\u4e0a\u539f\u6587\u56fe:"),l.createElement("img",{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdcea13361a1ec?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"\u539f\u6587\u56fe"})),l.createElement("ul",null,l.createElement("li",null,"\u9996\u5148\u6267\u884c\u540c\u6b65\u4ee3\u7801\uff0c\u8fd9\u5c5e\u4e8e\u5b8f\u4efb\u52a1"),l.createElement("li",null,"\u5f53\u6267\u884c\u5b8c\u6240\u6709\u540c\u6b65\u4ee3\u7801\u540e\uff0c\u6267\u884c\u6808\u4e3a\u7a7a\uff0c\u67e5\u8be2\u662f\u5426\u6709\u5f02\u6b65\u4ee3\u7801\u9700\u8981\u6267\u884c"),l.createElement("li",null,"\u6267\u884c\u6240\u6709\u5fae\u4efb\u52a1"),l.createElement("li",null,"\u5f53\u6267\u884c\u5b8c\u6240\u6709\u5fae\u4efb\u52a1\u540e\uff0c\u5982\u6709\u5fc5\u8981\u4f1a\u6e32\u67d3\u9875\u9762")),l.createElement("p",null,"\u7136\u540e\u5f00\u59cb\u4e0b\u4e00\u8f6e Event Loop\uff0c\u6267\u884c\u5b8f\u4efb\u52a1\u4e2d\u7684\u5f02\u6b65\u4ee3\u7801\uff0c\u4e5f\u5c31\u662f setTimeout \u4e2d\u7684\u56de\u8c03\u51fd\u6570"),l.createElement("p",null,"==",l.createElement("strong",null,"\u5fae\u4efb\u52a1\u5305\u62ec:"),"== process.nextTick,promise,DOM\u53d1\u751f\u53d8\u5316\u3001MutationObserver\u3002 ==",l.createElement("strong",null,"\u5b8f\u4efb\u52a1\u5305\u62ec:"),"== \u5305\u62ec\u6574\u4f53\u4ee3\u7801script,setTimeout,setInterval,setImmediate,I/O,UI rendering."),l.createElement("p",null,l.createElement("strong",null,"\u4e8b\u4ef6\u5faa\u73af\u987a\u5e8f:")," js\u5f15\u64ce  --\x3e \u6e05\u7a7a\u5fae\u4efb\u52a1 --\x3e UI\u6e32\u67d3 --\x3e \u53d6\u51fa\u5b8f\u4efb\u52a1 --\x3e js\u5f15\u64ce\u6267\u884c"),l.createElement("p",null,"*: js\u5f15\u64ce\u5373\u6267\u884c\u6808\u5305\u542b\u540c\u6b65\u4efb\u52a1\u4e0e\u5f02\u6b65\u4efb\u52a1\u3002"),l.createElement("h1",{id:"nodejs\u7684\u4e8b\u4ef6\u5faa\u73af"},l.createElement(a.AnchorLink,{to:"#nodejs\u7684\u4e8b\u4ef6\u5faa\u73af","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"nodejs\u7684\u4e8b\u4ef6\u5faa\u73af"),l.createElement("p",null,"\u539f\u6587\u5730\u5740: ",l.createElement(a.Link,{to:"https://github.com/SunShinewyf/issue-blog/issues/34#issuecomment-371106502"},"https://github.com/SunShinewyf/issue-blog/issues/34#issuecomment-371106502")),l.createElement("p",null,l.createElement("img",{src:"https://user-gold-cdn.xitu.io/2018/11/13/1670c3fe3f9a5e2b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"yck\u7684\u56fe"})),l.createElement("ul",null,l.createElement("li",null,"timers\u9636\u6bb5: \u8fd9\u4e2a\u9636\u6bb5\u6267\u884csetTimeout\u548csetInterval\u9884\u5b9a\u7684callback;"),l.createElement("li",null,"I/O callbacks \u9636\u6bb5: \u6267\u884c\u9664\u4e86 close\u4e8b\u4ef6\u7684callbacks\u3001\u88abtimers\u8bbe\u5b9a\u7684callbacks\u3001setImmediate()\u8bbe\u5b9a\u7684callbacks\u8fd9\u4e9b\u4e4b\u5916\u7684callbacks;"),l.createElement("li",null,"idle, prepare \u9636\u6bb5: \u4ec5node\u5185\u90e8\u4f7f\u7528;"),l.createElement("li",null,"poll \u9636\u6bb5:",l.createElement("ul",null,l.createElement("li",null,"\u56de\u5230timers\u9636\u6bb5\u6267\u884c\u56de\u8c03"),l.createElement("li",null,"\u6267\u884cI/O\u56de\u8c03"))),l.createElement("li",null,"check \u9636\u6bb5: \u6267\u884csetImmediate() \u8bbe\u5b9a\u7684callbacks;"),l.createElement("li",null,"close callbacks \u9636\u6bb5: \u6267\u884csocket.on('close', ...)\u8fd9\u4e9b callback")),l.createElement("h2",{id:"settimeoutfn0\u7684\u542b\u4e49\u662f\u4ec0\u4e48"},l.createElement(a.AnchorLink,{to:"#settimeoutfn0\u7684\u542b\u4e49\u662f\u4ec0\u4e48","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"setTimeout(fn,0)\u7684\u542b\u4e49\u662f\u4ec0\u4e48?"),l.createElement("p",null,"\u9996\u5148\u5b83",l.createElement("strong",null,"\u4e0d\u4f1a\u7acb\u5373\u6267\u884c"),"\u3002\u5b83\u662f\u6307\u5b9a\u67d0\u4e2a\u4efb\u52a1\u5728\u4e3b\u7ebf\u7a0b\u6700\u65e9\u53ef\u5f97\u7684\u7a7a\u95f2\u65f6\u95f4\u6267\u884c\uff0c\u610f\u601d\u5c31\u662f\u4e0d\u7528\u518d\u7b49\u591a\u5c11\u79d2\u4e86\uff0c\u53ea\u8981\u4e3b\u7ebf\u7a0b\u6267\u884c\u6808\u5185\u7684\u540c\u6b65\u4efb\u52a1\u5168\u90e8\u6267\u884c\u5b8c\u6210\uff0c\u6808\u4e3a\u7a7a\u5c31\u9a6c\u4e0a\u6267\u884c"),l.createElement(c.Z,{code:"console.log('\u5f00\u59cb\u6267\u884c');\r\nsetTimeout(()=>{\r\n    console.log('setTimeout');\r\n},0);\r\nconsole.log('\u6267\u884c\u5b8c\u6210');",lang:"javascript"}),l.createElement("blockquote",null,l.createElement("p",null,"\u5f00\u59cb\u6267\u884c \u6267\u884c\u5b8c\u6210 setTimeout")),l.createElement("h2",{id:"settimeoutfn0-vs-setimmediate-vs-processnexttick"},l.createElement(a.AnchorLink,{to:"#settimeoutfn0-vs-setimmediate-vs-processnexttick","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"setTimeout(fn,0) Vs setImmediate Vs process.nextTick()"),l.createElement("h3",{id:"settimeoutfn0-vs-setimmediate"},l.createElement(a.AnchorLink,{to:"#settimeoutfn0-vs-setimmediate","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"setTimeout(fn,0) Vs setImmediate"),l.createElement("ul",null,l.createElement("li",null,"setTimeout(fn,0)\u5728timer\u9636\u6bb5\u6267\u884c\uff0c\u5e76\u4e14\u662f\u5728poll\u9636\u6bb5\u8fdb\u884c\u5224\u65ad\u662f\u5426\u8fbe\u5230\u6307\u5b9a\u7684time\u65f6\u95f4\u624d\u4f1a\u6267\u884c"),l.createElement("li",null,"setImmediate\u5728check\u9636\u6bb5\u624d\u4f1a\u6267\u884c")),l.createElement("p",null,"\u4e24\u8005\u7684\u6267\u884c\u987a\u5e8f\u8981\u6839\u636e\u5f53\u524d\u7684\u6267\u884c\u73af\u5883\u624d\u80fd\u786e\u5b9a\uff0c\u6839\u636e\u5b98\u65b9\u6587\u6863\u603b\u7ed3\u5f97\u51fa\u7684\u7ed3\u8bba\u662f\uff1a"),l.createElement("ul",null,l.createElement("li",null,"\u5982\u679c\u4e24\u8005\u90fd\u5728\u4e3b\u6a21\u5757\uff08main module\uff09\u8c03\u7528\uff0c\u90a3\u4e48\u6267\u884c\u5148\u540e\u53d6\u51b3\u4e8e\u8fdb\u7a0b\u6027\u80fd\uff0c\u5373\u968f\u673a\u3002"),l.createElement("li",null,"\u5982\u679c\u4e24\u8005\u90fd\u4e0d\u5728\u4e3b\u6a21\u5757\u8c03\u7528\uff08\u5373\u5728\u4e00\u4e2a IO circle \u4e2d\u8c03\u7528\uff09\uff0c\u90a3\u4e48setImmediate\u7684\u56de\u8c03\u6c38\u8fdc\u5148\u6267\u884c\u3002")),l.createElement("h3",{id:"setimmediate-vs-processnexttick"},l.createElement(a.AnchorLink,{to:"#setimmediate-vs-processnexttick","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"setImmediate Vs process.nextTick()"),l.createElement("ul",null,l.createElement("li",null,"setImmediate()\u5c5e\u4e8echeck\u89c2\u5bdf\u8005\uff0c\u5176\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u4f1a\u63d2\u5165\u5230\u4e0b\u6b21\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\uff0c\u6bcf\u6b21\u4e8b\u4ef6\u5faa\u73af\u53ea\u6267\u884c\u94fe\u8868\u4e2d\u7684\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3002"),l.createElement("li",null,"process.nextTick()\u6240\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5b58\u653e\u5230\u6570\u7ec4\u4e2d\uff0c\u4e00\u6b21\u6027\u6267\u884c\u6240\u6709\u56de\u8c03\u51fd\u6570\u3002"),l.createElement("li",null,"process.nextTick()\u8c03\u7528\u6df1\u5ea6\u7684\u9650\u5236\uff0c\u4e0a\u9650\u662f1000\uff0c\u800csetImmediate\u6ca1\u6709\uff1b"),l.createElement("li",null)),l.createElement("p",null,l.createElement("strong",null,"\u4e3b\u6a21\u5757\u4e24\u8005\u6253\u5370\u5219\u968f\u673a")),l.createElement(c.Z,{code:"/**\r\n * \u9996\u5148 setTimeout(fn,0)===setTimeout(fn,1)\r\n * \u5982\u679c\u8fdb\u5165\u4e8b\u4ef6\u5faa\u73af\u6240\u82b1\u8d39\u7684\u5927\u4e8e1ms\u65f6\u95f4,\u90a3\u4e48timer\u9636\u6bb5\u4f1a\u76f4\u63a5\u6267\u884csetTimeout\r\n * \u5982\u679c\u51c6\u5907\u65f6\u95f4\u82b1\u8d39\u5c0f\u4e8e1ms,\u90a3\u4e48setImmediate\u56de\u8c03\u5148\u6267\u884c\r\n */\r\nsetTimeout(() => {\r\n    console.log('setTimeout')\r\n\r\n}, 0);\r\nsetImmediate(()=>{\r\n    console.log('setImmediate');\r\n    \r\n})",lang:"javascript"}),l.createElement("p",null,l.createElement("strong",null,"IO circle\u4e2d\u8c03\u7528\uff0c\u90a3\u4e48setImmediate\u7684\u56de\u8c03\u6c38\u8fdc\u5148\u6267\u884c")),l.createElement(c.Z,{code:"const fs = require('fs')\r\n\r\nfs.readFile(__filename, () => {\r\n    setTimeout(() => {\r\n        console.log('timeout');\r\n    }, 0)\r\n    setImmediate(() => {\r\n        console.log('immediate')\r\n    })\r\n})",lang:"javascript"}),l.createElement("h1",{id:"\u7ed3\u5c3e"},l.createElement(a.AnchorLink,{to:"#\u7ed3\u5c3e","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u7ed3\u5c3e"),l.createElement("p",null,"**\u58f0\u660e:**\u672c\u6587\u90fd\u662f\u6458\u6284\u7f51\u4e0a\u4e00\u4e9b\u597d\u7684\u6587\u7ae0\uff0c\u6742\u5408\u800c\u6210\uff0c\u5982\u4f55\u4fb5\u6743\u8bf7\u7559\u8a00",l.createElement("strong",null,"\u4f18\u79c0\u539f\u6587"),"\uff1a",l.createElement(a.Link,{to:"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/"},"Tasks, microtasks, queues and schedules")))))}}]);