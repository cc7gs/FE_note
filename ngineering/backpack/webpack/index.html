<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta name="keywords" content="js,node,算法，数据结构，前端面试,前端工具" />
    <meta name="description" content="在这里记录学习前端过程过程点滴" />
    <link rel="shortcut icon" type="image/x-icon" href="/FE_note/favicon.ico" />
    <style>

      .__dumi-default-layout-hero {
        background-color: #1890ff !important;
        transition: 0.3s all;
       }
       .__dumi-default-layout-hero:hover {
          background-position-y: -20px;
        }

        .__dumi-default-layout-hero h1 {
          color: #fff !important;
        }

        .__dumi-default-layout-hero div > p {
          color: #fff;
        }
      }
    </style>
    <link rel="stylesheet" href="/FE_note/umi.07662fd3.css" />
    <script>
      window.routerBase = "/FE_note/";
    </script>
    <script>
      //! umi version: 3.5.13
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>webpack</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/ngineering/backpack/webpack" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/FE_note/logo.svg&#x27;)" href="/FE_note//">FE-Note ｜晨风笔记</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/FE_note//basic">夯实基础</a><ul><li><a href="/FE_note//basic">前端基础篇</a></li><li><a href="/FE_note//react">React基础篇</a></li><li><a href="/FE_note//node-basic">node基础篇</a></li></ul></span><span>提升篇<ul><li><a href="/FE_note//node-source">node源码分析</a></li><li><a href="/FE_note//react/depth">react源码分析</a></li><li><a href="/FE_note//rx-js">RxJS</a></li><li><a href="/FE_note//typescript">Typescript</a></li></ul></span><span><a aria-current="page" class="active" href="/FE_note//ngineering">工程化</a></span><span><a href="/FE_note//interview">面试篇</a></span><span><a href="/FE_note//lettcode">算法刷题</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/cc7gs/frontEnd_note">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/FE_note/logo.svg&#x27;)" href="/FE_note//"></a><h1>FE-Note ｜晨风笔记</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/FE_note//basic">夯实基础</a><ul><li><a href="/FE_note//basic">前端基础篇</a></li><li><a href="/FE_note//react">React基础篇</a></li><li><a href="/FE_note//node-basic">node基础篇</a></li></ul></li><li>提升篇<ul><li><a href="/FE_note//node-source">node源码分析</a></li><li><a href="/FE_note//react/depth">react源码分析</a></li><li><a href="/FE_note//rx-js">RxJS</a></li><li><a href="/FE_note//typescript">Typescript</a></li></ul></li><li><a aria-current="page" class="active" href="/FE_note//ngineering">工程化</a></li><li><a href="/FE_note//interview">面试篇</a></li><li><a href="/FE_note//lettcode">算法刷题</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/cc7gs/frontEnd_note">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/FE_note//ngineering/backpack">webpack</a><ul><li><a href="/FE_note//ngineering/backpack/bundler"><span>bundle</span></a></li><li><a href="/FE_note//ngineering/backpack/demo-ts"><span>ts+webpack</span></a></li><li><a href="/FE_note//ngineering/backpack/pre"><span>编写一个loader</span></a></li><li><a href="/FE_note//ngineering/backpack/ts-react-webpack"><span>scripty</span></a></li><li><a aria-current="page" class="active" href="/FE_note//ngineering/backpack/webpack"><span>webpack</span></a></li></ul></li><li><a href="/FE_note//ngineering/devops">部署</a><ul><li><a href="/FE_note//ngineering/devops/docker"><span>docker</span></a></li></ul></li><li><a href="/FE_note//ngineering/other">Other</a><ul><li><a href="/FE_note//ngineering/other/backpack"><span>backpack</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="loader" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#loader"><span>loader</span></a></li><li title="file-loader &amp; url-loader" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#file-loader--url-loader"><span>file-loader &amp; url-loader</span></a></li><li title="style打包" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#style打包"><span>style打包</span></a></li><li title="字体打包" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#字体打包"><span>字体打包</span></a></li><li title="plugin" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#plugin"><span>plugin</span></a></li><li title="开发环境(devtool)" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#开发环境devtool"><span>开发环境(devtool)</span></a></li><li title="其它参数" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#其它参数"><span>其它参数</span></a></li><li title="webpackDevServer" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#webpackdevserver"><span>webpackDevServer</span></a></li><li title="webpack-dev-middleware" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#webpack-dev-middleware"><span>webpack-dev-middleware</span></a></li><li title="模块热替换(hot module replacement)" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#模块热替换hot-module-replacement"><span>模块热替换(hot module replacement)</span></a></li><li title="development 和 production 模块区分打包" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#development-和-production-模块区分打包"><span>development 和 production 模块区分打包</span></a></li><li title="weback-merge使用" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#weback-merge使用"><span>weback-merge使用</span></a></li><li title="Code Splitting（代码分割）" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#code-splitting（代码分割）"><span>Code Splitting（代码分割）</span></a></li><li title="使用入口配置" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#使用入口配置"><span>使用入口配置</span></a></li><li title="防止重复(SplitChunksPlugin)" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#防止重复splitchunksplugin"><span>防止重复(SplitChunksPlugin)</span></a></li><li title="动态导入" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#动态导入"><span>动态导入</span></a></li><li title="lazy Loading（懒加载）" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#lazy-loading（懒加载）"><span>lazy Loading（懒加载）</span></a></li><li title="shim 预置依赖" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#shim-预置依赖"><span>shim 预置依赖</span></a></li><li title="配置 typescript" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#配置-typescript"><span>配置 typescript</span></a></li><li title="tsconfig 配置" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#tsconfig-配置"><span>tsconfig 配置</span></a></li><li title="webpack 配置" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#webpack-配置"><span>webpack 配置</span></a></li><li title="配置多页面" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#配置多页面"><span>配置多页面</span></a></li><li title="webpack 配置es6语法" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#webpack-配置es6语法"><span>webpack 配置es6语法</span></a></li><li title="解决babel-polyfil 污染全局环境问题" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#解决babel-polyfil-污染全局环境问题"><span>解决babel-polyfil 污染全局环境问题</span></a></li><li title="prefetch 与preload" data-depth="2"><a href="/FE_note//ngineering/backpack/webpack#prefetch-与preload"><span>prefetch 与preload</span></a></li><li title="两者对比" data-depth="3"><a href="/FE_note//ngineering/backpack/webpack#两者对比"><span>两者对比</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><p>[TOC]</p><h1 id="webpack-是什么"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-是什么"><span class="icon icon-link"></span></a>webpack 是什么?</h1><p>本质上webpack是一个现代javascript应用程序的静态打包工具。 其它基础概念,查看<a target="_blank" rel="noopener noreferrer" href="https://webpack.docschina.org/concepts/">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h1 id="webpack-基础篇"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-基础篇"><span class="icon icon-link"></span></a>webpack 基础篇</h1><h2 id="loader"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#loader"><span class="icon icon-link"></span></a>loader</h2><p>webpack 只能理解javascript和json文件。loader可以让它能够处理其他类型的文件，并将其转换有效模块。</p><h3 id="file-loader--url-loader"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#file-loader--url-loader"><span class="icon icon-link"></span></a>file-loader &amp; url-loader</h3><p>两者主要功能都是对加载资源进行打包,但是 url-loader设置资源大小来对小资源进行打包js内，来减少网络带宽</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// rules: [</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//   { </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//     test: /\.(png|jpg|gif)$/, </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//     use: {</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//       loader:&#x27;file-loader&#x27;,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//       options:{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//         name:&#x27;[name].[ext]&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//       }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//     }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">//    },</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        use</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            loader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;url-loader&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            options</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              limit</span><span class="token operator">:</span><span class="token number">138228</span><span class="token plain">  </span><span class="token comment">//资源大小</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></pre></div><p>***:**最终在浏览器端可以看到打包后得资源路径变为 &#x27;data:image/png;base64...&#x27;</p><h3 id="style打包"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#style打包"><span class="icon icon-link"></span></a>style打包</h3><p><strong>安装</strong></p><blockquote><p>npm i style-loader  css-loader -D</p></blockquote><p><strong>使用</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  test</span><span class="token operator">:</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.css$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      loader</span><span class="token operator">:</span><span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      options</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        importLoaders</span><span class="token operator">:</span><span class="token number">2</span><span class="token plain">  </span><span class="token comment">//保证import 引入得样式会执行所有loader,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        modules</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token plain">  </span><span class="token comment">//样式模块化</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain">  </span><span class="token comment">//注意loader 顺序</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>css-loader 用户处理.css 文件，style-loader用于对样挂在标签上。 注意loader顺序， loader是从下到上 从右到左开始加载。</p><h3 id="字体打包"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#字体打包"><span class="icon icon-link"></span></a>字体打包</h3><p>file-loader 和 url-loader 可以接收并加载任何文件也包括字体.</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  test</span><span class="token operator">:</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.(eot|svg|ttf|woff)$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain">  </span><span class="token comment">//打包字体</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></pre></div><h2 id="plugin"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#plugin"><span class="icon icon-link"></span></a>plugin</h2><p>可以在webpack 运行到某个时刻帮我们做一些事情比如:打包优化、资源管理、注入环境变量等。</p><ul><li>html-webpack-plugin<ul><li>会在打包结束后,自动生成一个html文件,并把打包生成的js自动引入到这个html文件中.</li></ul></li><li>clean-webpack-plugin<ul><li>在打包之前,帮助我们删除dist目录</li></ul></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//预先清理</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      title</span><span class="token operator">:</span><span class="token string">&#x27;html plugin demo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      template</span><span class="token operator">:</span><span class="token string">&#x27;index.html&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></pre></div><ul><li>friendly-errors-webpack-plugin</li></ul><p>它可以识别某些类别的webpack错误，并清理，聚合和优先级，以提供更好的开发人员体验。</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">FriendlyErrorsPlugin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;friendly-errors-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">FriendlyErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            compilationSuccessInfo</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              messages</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;You application is running here http://localhost:3000&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              notes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;Some additionnal notes to be displayed unpon successful compilation&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token function-variable function">onErrors</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">severity</span><span class="token parameter punctuation">,</span><span class="token parameter"> errors</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token comment">// You can listen to errors transformed and prioritized by the plugin</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token comment">// severity can be &#x27;error&#x27; or &#x27;warning&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token comment">// should the console be cleared between each compilation?</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token comment">// default is true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            clearConsole</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">           </span></div><div class="token-line"><span class="token plain">            </span><span class="token comment">// add formatters and transformers (see below)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            additionalFormatters</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            additionalTransformers</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span></div></pre></div><ul><li>webpack-build-notifier 它使用节点通知程序模块显示Webpack构建错误和警告的操作系统级别通知。</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">WebpackBuildNotifierPlugin</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-build-notifier&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">//...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  quiet</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">WebpackBuildNotifierPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            title</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;My Project Webpack Build&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token comment">// logo: path.resolve(&quot;./img/favicon.png&quot;),</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            suppressSuccess</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="开发环境devtool"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#开发环境devtool"><span class="icon icon-link"></span></a>开发环境(devtool)</h2><p><strong>sourceMap:</strong>它是一个映射关系,可以找到打包后代码位置在打包前哪个位置.<strong>配置</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">devtool</span><span class="token operator">:</span><span class="token string">&#x27;source-map&#x27;</span><span class="token plain"> </span><span class="token comment">//production 环境默认配置</span></div></pre></div><h3 id="其它参数"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#其它参数"><span class="icon icon-link"></span></a>其它参数</h3><ul><li>cheap-module-eval-source-map<ul><li>适合 dev环境</li></ul></li><li>cheap-module-source-map<ul><li>适合开发环境</li></ul></li></ul><p><strong>记忆技巧</strong></p><ul><li>*-source-map 参数中带有 source-map的则都具有映射关系,打包后会生成.map文件</li><li>inline-* 参数中带有 inline 的,会将.map文件和并到打包文件中.</li><li>cheap<ul><li>提示行不提示具体那一列出错,不提示module(第三方模块)里的错误</li></ul></li><li>module<ul><li>带有modlue 的则会提示引入模块错误信息.</li></ul></li><li>eval<ul><li>通过eval 生成source-map引入.</li></ul></li></ul><h2 id="webpackdevserver"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpackdevserver"><span class="icon icon-link"></span></a>webpackDevServer</h2><p>它帮我们启动一个简单web server,并有实时重新加载功能.</p><blockquote><p>npm i webpack-dev-server -D</p></blockquote><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  port</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//启动端口号</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  contentBase</span><span class="token operator">:</span><span class="token string">&#x27;./dist&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//从什么位置查找文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  open</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//自动打开默认浏览器,并访问服务</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  proxy</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token comment">//跨域代理</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span><span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  historyApiFallback</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token plain"> </span><span class="token comment">//开启浏览器路由</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="webpack-dev-middleware"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-dev-middleware"><span class="icon icon-link"></span></a>webpack-dev-middleware</h3><p>webpack-dev-middleware 是一个封装器(wrapper)，它可以把 webpack 处理过的文件发送到一个 server。</p><blockquote><p>npm install wepack-dev-middleware --save-dev</p></blockquote><p><strong>根目录新建server.js</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">/**</span></div><div class="token-line"><span class="token comment"> * 实现类似 devServer服务,作用:1.监听文件改变</span></div><div class="token-line"><span class="token comment"> * 1. 检测文件改变&#x27;</span></div><div class="token-line"><span class="token comment"> * 2. 读取webpack conifg 文件</span></div><div class="token-line"><span class="token comment"> * 3. 启动一个服务</span></div><div class="token-line"><span class="token comment"> * */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> express</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;express&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> webpackDevMiddleware</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-middleware&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> webpack</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> config</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./webpack.config.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> complier</span><span class="token operator">=</span><span class="token function">webpack</span><span class="token punctuation">(</span><span class="token plain">config</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> app</span><span class="token operator">=</span><span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 告诉 express 使用 webpack-dev-middleware，</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 以及将 webpack.config.js 配置文件作为基础配置</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">app</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span><span class="token plain">complier</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  publicPath</span><span class="token operator">:</span><span class="token plain">config</span><span class="token punctuation">.</span><span class="token property-access">output</span><span class="token punctuation">.</span><span class="token property-access">publicPath</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">app</span><span class="token punctuation">.</span><span class="token method function property-access">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;server at port 3000&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre></div><p><strong>package.json</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">script:{</span></div><div class="token-line"><span class="token plain">    &quot;server&quot;:&quot;node server.js&quot;    </span></div><div class="token-line"><span class="token plain">  }</span></div></pre></div><p><strong>启动server</strong></p><blockquote><p>npm run server</p></blockquote><h2 id="模块热替换hot-module-replacement"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#模块热替换hot-module-replacement"><span class="icon icon-link"></span></a>模块热替换(hot module replacement)</h2><p>它会在应用程序运行过程中,替换、添加或删除模块，而不需要重新加载整个页面。</p><ul><li>保留在完全重新加载页面期间丢失的应用状态</li><li>只更新变更内容</li><li>在源码对css/js进行修改，会立即在浏览器中进行更新</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> webpack</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">devServer&quot;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//启动热替换</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  hotOnly</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token plain"> </span><span class="token comment">//当 hot不起作用时，浏览器也不会重新</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation">.</span><span class="token class-name">hotModlueReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span></div></pre></div><h1 id="webpack-提升篇"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-提升篇"><span class="icon icon-link"></span></a>webpack 提升篇</h1><h2 id="development-和-production-模块区分打包"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#development-和-production-模块区分打包"><span class="icon icon-link"></span></a>development 和 production 模块区分打包</h2><p>分别创建webpack.dev.js 和webpack.prod.js用于表示开发环境和生产环境配置。</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token string">&quot;script&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;dev&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack-dev-server --config webpack.dev.js&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --config webpack.prod.js&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="weback-merge使用"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#weback-merge使用"><span class="icon icon-link"></span></a>weback-merge使用</h3><p>我们还可以通过 webpack-merge 来将 dev 和pro 文件公共部分提取出来。</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">//webpack.dev.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> merge</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-merge&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> commConfig</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./webpack.comm.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> devConfig</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token spread operator">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token plain">commConig</span><span class="token punctuation">,</span><span class="token plain">devConfig</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="code-splitting（代码分割）"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#code-splitting（代码分割）"><span class="icon icon-link"></span></a>Code Splitting（代码分割）</h2><p>此特性可以把代码分离到不同的bundle中,然后可以按需加载或并行加载这些文件。 常用的代码分离方法有三种：</p><p>入口配置：使用 entry 配置手动地分离代码。 防止重复：使用 SplitChunksPlugin 去重和分离 chunk。 动态导入：通过模块中的内联函数调用来分离代码。</p><h3 id="使用入口配置"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#使用入口配置"><span class="icon icon-link"></span></a>使用入口配置</h3><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">entry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token comment">//配置多个入口文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    index</span><span class="token operator">:</span><span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    another</span><span class="token operator">:</span><span class="token string">&#x27;./src/modleA.js&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></pre></div><p>通过配置多个入口文件，则可以生成多个chunk,但是如果每个入口文件(chunk)之间存在重复的模块，则会导致被重复引用进各个模块中。我们可以通过使用 <a target="_blank" rel="noopener noreferrer" href="https://webpack.docschina.org/plugins/split-chunks-plugin/">SplitChunksPlugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件来移除重复模块。</p><h3 id="防止重复splitchunksplugin"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#防止重复splitchunksplugin"><span class="icon icon-link"></span></a>防止重复(SplitChunksPlugin)</h3><p>该插件已经集成在webpack中，不需要再次安装，现在我们修改上面配置</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  mode</span><span class="token operator">:</span><span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    index</span><span class="token operator">:</span><span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// another:&#x27;./src/modleA.js&#x27; //去掉手动引入loadsh 的入口文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  optimization</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token comment">//添加如下配置</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    splitChunks</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      chunks</span><span class="token operator">:</span><span class="token string">&#x27;all&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="动态导入"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#动态导入"><span class="icon icon-link"></span></a>动态导入</h3><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;lodash&quot; */</span><span class="token plain"> </span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">_</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> element </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    element</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> _</span><span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> element</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token string">&#x27;An error occured while loading the component&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">component</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token plain">component</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">//webpack.config.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  mode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    index</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      template</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;index.html&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></pre></div><h2 id="lazy-loading（懒加载）"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#lazy-loading（懒加载）"><span class="icon icon-link"></span></a>lazy Loading（懒加载）</h2><p>懒加载可以帮助我们优化网页或应用程序提升加载速度。 modleA.js</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;this modlle A &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;button click hered&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>index.js</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">initComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> button </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> br </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;br&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  button</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;click me!&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token plain">br</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token plain">button</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  button</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;modleA&quot; */</span><span class="token plain"> </span><span class="token string">&#x27;./modleA&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> print </span><span class="token operator">=</span><span class="token plain"> module</span><span class="token punctuation">.</span><span class="token keyword module">default</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">initComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="shim-预置依赖"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#shim-预置依赖"><span class="icon icon-link"></span></a>shim 预置依赖</h2><p>在webpack中,所有都是模块化，因此模块与模块之间是独立的，如果我们想运行下面这样代码，此时就需要shim 配置全局变量</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">//juery.test.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token function">defualt</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#x27;body&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">css</span><span class="token punctuation">(</span><span class="token string">&#x27;background&#x27;</span><span class="token operator">:</span><span class="token string">&#x27;green&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">$</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;jquery&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">test</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;./juqery.test.js&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>配置webpack</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> webpack</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation">.</span><span class="token class-name">providePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    $</span><span class="token operator">:</span><span class="token string">&#x27;juqery&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span></div></pre></div><h2 id="配置-typescript"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#配置-typescript"><span class="icon icon-link"></span></a>配置 typescript</h2><p>//安装 webpack依赖</p><blockquote><p>npm install  --save-dev webpack webpack-cli npm install --save-dev  typescript ts-loader</p></blockquote><h3 id="tsconfig-配置"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#tsconfig-配置"><span class="icon icon-link"></span></a>tsconfig 配置</h3><p>项目根目录新建tsconfig.json文件</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;outDir&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;./dist/&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;noImplicitAny&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;module&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;target&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;jsx&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&quot;allowJs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="webpack-配置"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-配置"><span class="icon icon-link"></span></a>webpack 配置</h3><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> path </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;./src/index.ts&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    rules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.tsx?$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        use</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;ts-loader&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">node_modules</span><span class="token regex regex-delimiter">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  resolve</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    extensions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token string">&#x27;.tsx&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;.ts&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;.js&#x27;</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    filename</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;bundle.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    path</span><span class="token operator">:</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="配置多页面"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#配置多页面"><span class="icon icon-link"></span></a>配置多页面</h2><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">entry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  index</span><span class="token operator">:</span><span class="token string">&#x27;./src/index.ts&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  list</span><span class="token operator">:</span><span class="token string">&#x27;./src/list.ts&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebapckPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    fileName</span><span class="token operator">:</span><span class="token string">&#x27;index.html&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    chunks</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#x27;runtime&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;index&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebapckPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    filename</span><span class="token operator">:</span><span class="token string">&#x27;list.html&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    chunks</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#x27;runtime&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;list&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span></div></pre></div><p>关于配置函数化提取，和配置。</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">makePlugins</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">configs</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> plugins</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      root</span><span class="token operator">:</span><span class="token plain">path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token plain">configs</span><span class="token punctuation">.</span><span class="token property-access">entry</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEarch</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    plugins</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebapckPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      fileName</span><span class="token operator">:</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">.html</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      chunks</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#x27;runtime&#x27;</span><span class="token punctuation">,</span><span class="token plain">item</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> plugins</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> config</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  entry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  index</span><span class="token operator">:</span><span class="token string">&#x27;./src/index.ts&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  list</span><span class="token operator">:</span><span class="token string">&#x27;./src/list.ts&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">config</span><span class="token punctuation">.</span><span class="token property-access">configs</span><span class="token operator">=</span><span class="token function">makePlugins</span><span class="token punctuation">(</span><span class="token plain">config</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token operator">=</span><span class="token plain"> config</span><span class="token punctuation">;</span></div></pre></div><p><a href="/FE_note//ngineering/backpack/demo-ts">源码</a></p><h1 id="杂记"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#杂记"><span class="icon icon-link"></span></a>杂记</h1><h2 id="webpack-配置es6语法"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#webpack-配置es6语法"><span class="icon icon-link"></span></a>webpack 配置es6语法</h2><p><a target="_blank" rel="noopener noreferrer" href="https://babeljs.io/setup#installation">官方指南戳这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">//安装loader 和babel 核心库</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save</span><span class="token operator">-</span><span class="token plain">dev babel</span><span class="token operator">-</span><span class="token plain">loader @babel</span><span class="token operator">/</span><span class="token plain">core</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//语法转换库</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save</span><span class="token operator">-</span><span class="token plain">dev @babel</span><span class="token operator">/</span><span class="token plain">preset</span><span class="token operator">-</span><span class="token plain">env </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//添加webpack 配置</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.js$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">node_modules</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      use</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      loader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;babel-loader&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      options</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        presets</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#x27;@babel/preset-env&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>到这里,es6语法基本可以转换，还是对于map、includes 等方法函数，没有转换， 如果要进行转换则需要babel-profill 使用流程如下:</p><ol><li><strong>安装</strong></li></ol><blockquote><p>npm install --save @babel/polyfill</p></blockquote><ol start="2"><li><strong>在代码入口引入</strong></li></ol><blockquote><p>import &quot;@babel/polyfill&quot;;</p></blockquote><p>到这里,打包后的代码会被转化，但是babel-polyfill 里有所以规则导致打包后体积变很大， 如果我们只是想转换我们写的代码，则需要修改如下配置</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">options</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  presets</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">[</span><span class="token string">&#x27;@babel/preset-env&#x27;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    useBuiltIns</span><span class="token operator">:</span><span class="token string">&#x27;usage&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="解决babel-polyfil-污染全局环境问题"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#解决babel-polyfil-污染全局环境问题"><span class="icon icon-link"></span></a>解决babel-polyfil 污染全局环境问题</h3><p>使用 @babel/plugin-transform-runtime来进行转换</p><ol><li>安装</li></ol><p>npm install --save-dev @babel/plugin-transform-runtime npm install --save @babel/runtime-corejs2 2. .baberc</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;absoluteRuntime&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;corejs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">//默认false  </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;helpers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;regenerator&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;useESModules&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="prefetch-与preload"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#prefetch-与preload"><span class="icon icon-link"></span></a>prefetch 与preload</h2><p>两者都能提升code coverage,prefetch 是指将来某个节点需要加载的资源;preload 是指当前可能需要加载的资源</p><h3 id="两者对比"><a aria-hidden="true" tabindex="-1" href="/FE_note//ngineering/backpack/webpack#两者对比"><span class="icon icon-link"></span></a>两者对比</h3><ul><li>preload会在父 chunk加载时,并行开始加载;prefetch 在父chunk加载完毕后开始加载</li><li>preload 具有优先级下载;而preload 是在浏览器空闲时开始加载</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span><span class="token plain"> </span><span class="token string">&#x27;LoginModal&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span><span class="token plain"> </span><span class="token string">&#x27;ChartingLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="最后更新时间：">7/18/2021 03:10:40</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-198796576-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/FE_note/umi.2bd9b667.js"></script>
  </body>
</html>
